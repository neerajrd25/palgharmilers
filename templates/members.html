{% extends "layout.html" %}

{% block title %}
Members
{% endblock %}

{% block body %}
<h1>Members</h1>
<ul>
  {% for member in members %}
  <li>
    <a href="{{ url_for('memberdetails', member_id=member.id)}}">
      {{ member.firstname }} {{ member.lastname }}
    </a>
  </li>
  {% endfor %}
  <hr>
  <div class="container">
    <div class="row">
      <div class="col-3">
        <button class="btn btn-primary" id="tshirtsize" onclick="visibleonclick()">Update T-Shirt size </button>
      </div>
      <div class="col-3">
        <button class="btn btn-primary" id="registermember" onclick="visibleonclick1()">Register New Member </button>
      </div>
    </div>
  </div>
  <hr>
  <div class="myDiv" id="t_size" style="display:none">
    <form id= "frm" action="{{ url_for('tshirtsize') }}" method="post">
      <div class="form-group">
        <select class="form-control" name="member_id">
          {% for member in members %}
          <option value="{{ member.id }}">{{ member.firstname }} {{ member.lastname }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="input-group">
        <input class="form-control" type="number" id="tshirtsize" name="tshirtsize" placeholder="size" required>
        <span class="input-group-addon">-</span>
        <input class="form-control" type="number" id ="tshirtnumber" name="tshirtnumber" placeholder="Number" required>
        <button id="updatemember"  class="btn btn-primary">Update Details</button>
      </div>
    </form>
  </div>
    <div class="myDiv" id="reg_member" style="display:none">
      <form action="{{url_for('registermember')}}" method="post" name="form2" enctype=multipart/form-data>
        First Name : <input type="text" class="mm" name="memberfname" id="memberfname" placeholder="First Name" autocomplete="off" autofocus><br><br>
        Last Name : <input type="tel" class="mm" name="memberlname" id="memberlname" placeholder="Last Name" autocomplete="off" autofocus><br><br>
        Date of Birth : <input type="date" name="memberdob" id="memberdob" value="2000-01-01"><br><br>
        Upload Photo : <input type=file name=file><br><br>
        <button class="btn btn-primary" id="regstermember" type="submit" value="Register" >Register</button>
      </form>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {

          document.querySelector('#regstermember').disabled = true;
          document.getElementById("memberdob").defaultValue = "2000-01-01";
          // Enable button only if there is text in the input field
          document.querySelector('#memberfname').onkeyup = function() {
              if ((document.querySelector('#memberfname').value.length > 0)&&(document.querySelector('#memberlname').value.length > 0))
                  document.querySelector('#regstermember').disabled = false;
              else
                  document.querySelector('#regstermember').disabled = true;
              }
          document.querySelector('#memberlname').onkeyup = function() {
              if ((document.querySelector('#memberfname').value.length > 0)&&(document.querySelector('#memberlname').value.length > 0))
                  document.querySelector('#regstermember').disabled = false;
              else
                  document.querySelector('#regstermember').disabled = true;
          }
      })
    </script>

    <script>
      function visibleonclick1() {

        if (document.querySelector("#reg_member").style.display === "none") {
          document.querySelector("#reg_member").style.display = "initial";
          document.querySelector("#t_size").style.display = "none";
        } else {
          document.querySelector("#reg_member").style.display = "none"
        }
      }

      function visibleonclick() {

        if (document.querySelector("#t_size").style.display === "none") {
          document.querySelector("#t_size").style.display = "initial";
          document.querySelector("#reg_member").style.display = "none";
        } else {
          document.querySelector("#t_size").style.display = "none"
        }
      }
    </script>

    {% endblock %}
